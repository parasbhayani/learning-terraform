## Terraform modules

- It is a set or collection of multiple resource that are used together in a single directory
- Modules can be downloaded / referenced from:
    1. Terraform public registry
    2. A private registry
    3. Local system

- Modules are referenced by ***module*** block

    ```
    module "my-s3-module" {
        source = "./modules/s3"
        version = "0.0.1"
        region = var.region
    }
    ```
    Other parameters allowed are *depends_on, for_each, providers, count*

- Modules are capable of accepting inputs and provide outputs<br>
Outputs generated by a module can consumed by root module using following syntax,

    > module.\<module name\>.\<name of output\>

- In this example we will create subdirectory inside the main folder with path /modules/vpc/<br>
We will create generic VPC module files which can be reused for multiple times as required

- This module outputs the Subnet ID and AMI ID which can be consumed by the the main module which creates the AWS instance by referencing the subnet created by the generic VPC module<br>
Highlighting point is how the referencing happens to the values derived from reusable module

    ```
    ami           = module.vpc.ami_id
    subnet_id     = module.vpc.subnet_id
    ```
- You can use the command to format all code file and subfolders recursively for terraform,

    > terraform fmt -recursive 

- The usual terraform init, validate, plan & apply works here in the same manner
- At the end it outputs the PrivateIP of the newly created AWS instance in the VPC created from the reusable module

- You can delete the infrastructure using terraform destroy command